package six

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

func Test_splitOrbit(t *testing.T) {
	testCases := []struct {
		oribit string
		p      string
		c      string
	}{
		{
			"COM)B",
			"COM",
			"B",
		},
		{
			"B)C",
			"B",
			"C",
		},
		{
			"C)D",
			"C",
			"D",
		},
		{
			"D)E",
			"D",
			"E",
		},
		{
			"E)F",
			"E",
			"F",
		},
	}

	for _, tc := range testCases {
		t.Run(tc.oribit, func(t *testing.T) {
			p, c := splitOrbit(tc.oribit)
			assert.Equal(t, tc.c, c)
			assert.Equal(t, tc.p, p)
		})
	}
}

func Test_ProcessOrbitMap(t *testing.T) {
	testCases := []struct {
		mapString string
		startID   string
		endID     string
		tOrbits   int
		routLen   int
	}{
		{
			"COM)B\nB)C\nC)D\nD)E\nE)F\nB)G\nG)H\nD)I\nE)J\nJ)K\nK)L\nK)YOU\nI)SAN",
			"YOU",
			"SAN",
			54,
			4,
		},
		{
			"6WF)DRK\n2PT)PSM\nH42)FN8\n1XR)LQD\nHRK)9KL\nTD6)H8W\n98Z)BJM\nRCQ)LVG\nRWQ)Q7H\n2PS)X94\nNHB)25X\nPXC)W57\nL8L)MVX\nCFK)D8K\nR1B)43T\nPDY)QKX\nFQK)82K\nJJ6)MQJ\nFB6)6V1\nR28)5MZ\nBN2)5HN\n6BQ)JVC\nW57)22C\nMQJ)DL2\nMTC)84R\nRH8)CRN\nY27)3GN\nCKQ)31C\nR7V)9BK\nZDY)PDY\nX2Q)Y6S\nQ8B)SAN\n1Z3)PVT\nR87)57R\nKCJ)44X\nPWQ)9CB\nHLC)VYW\nHFP)9XS\nX33)MC3\nRYS)R7R\nJRF)VHW\n79R)FXZ\nYQQ)STV\n8J6)JWX\nQ6D)RV6\nLL9)B4D\n6R1)T1Z\nVK9)42M\nPQP)17N\nK6C)HMK\nGLY)N47\nKDW)CDC\nDQ4)RY5\nSND)FDR\n7YF)1VN\nMDT)B3S\nD3F)98Z\n5VH)MR7\nKNR)2L8\nCJW)QDL\nFWY)14X\nSJD)79R\nCOM)BXW\nT2B)FPB\nB2Q)BRJ\nZ21)HYC\nVHW)5XR\nWZ4)2JM\n8HF)342\nPYR)X9Y\nRKF)P43\nS1S)9WT\n2PB)BSB\nQF7)M9T\nHML)HMC\n7J9)7Q6\n8F1)29K\nDH1)NDM\n1YC)PXC\nP32)HR7\nPMX)7Y9\nSTV)SLW\nNYY)NF1\nTG9)998\nDMB)DLW\nXGL)1Z3\nGK8)WCS\nYHR)HQC\n9Q5)B6D\nR2T)CM5\n6KC)J5G\nZM9)L8L\nJ8T)F89\n3LN)YOU\nT2T)Z8F\nSCY)FKG\n9W4)195\nQLM)DD7\n4QY)JCB\nWKM)3JF\n693)YM8\n61M)B6Y\nDSP)X2M\nYZ5)DPL\nBC9)3B1\nBDB)JTG\n3TJ)TW1\nW5M)SF6\nK4Q)X56\n5HT)YHX\nYJG)DM5\n68N)X2Q\n2YP)DS5\nBLK)MY3\n6WV)VZ4\n2JQ)ZT8\nG93)V2W\nWN1)SBD\nSS7)DY9\nX56)8HP\nJY1)VS4\nXQ6)L94\n98Z)DMC\nV6S)NWT\nD9L)Y44\nV6G)GVS\nJDW)FZW\nFJT)S38\nL2Z)VPL\n7ZX)DKK\nX2M)8WM\nYVZ)XWS\nHMK)P87\n47M)TD6\nTDZ)21T\n19R)95B\nGD9)Q1L\n9QX)DFR\nY64)XGN\nCRG)6VY\nV3L)61D\nRJ4)C9Z\nXXG)P53\nVJ8)QTF\nCPQ)2M9\nJRN)8V1\nKMH)K94\nDLW)VQ4\n91W)2QQ\nG4B)RWQ\n4P1)MKS\nK6G)DZ7\nWCS)JR9\nLXM)7RY\n6ZB)K6G\nHMC)622\nZ21)BLK\nQ6N)48V\n66S)MK4\nPDK)6WV\nY6S)GY1\n2L8)ZMG\n42W)ZN6\n6MS)8TZ\nJBY)STQ\nNSF)3ZM\n5CV)X9N\nK4V)WFL\nJ6R)DT8\nN3N)CX4\nPTD)YXT\nF74)4T5\nC51)3FW\nKRW)DS1\nNWT)CKQ\n195)6G6\nHVQ)S18\nQ7H)BKM\nSKN)4D4\nGK2)MLX\nMVX)TG9\nYPK)RHQ\nY9F)Z8W\n42M)WNL\n84R)6JP\nKNC)NHF\nFZW)PGM\n3FW)HGX\nDBK)FB6\n45T)HLT\nL11)JVN\nHB5)K6C\nQH5)888\nBTJ)J55\n8BT)8ZS\nFR1)XGL\nS87)PS9\nC4K)BN2\nN2Q)18C\nKTF)ZM9\nTN2)B2Q\nDF3)CFK\n9T3)TMR\nP29)3P1\nP1W)7SQ\n4D4)1DJ\nLML)ZJ3\nQ4L)RKF\nMW2)79T\nLVG)CPQ\nBDC)JH5\nDNZ)232\n998)GTM\nYGS)4WH\nGY1)C51\nJ55)QBT\nB8Z)34W\nFJ2)H42\n58J)326\nT1Z)DCJ\n1ZH)GLV\n1YC)JG6\n14K)22B\nRY5)QRY\n7V2)2WT\n4GQ)XHV\nZJ3)TQ8\n2G8)SN3\nFPB)HMN\nSC4)57D\n5LQ)R2T\nLXM)R8Z\nJQ6)G4B\nWNL)GK2\n42M)P75\nLM3)YPK\nZN6)753\nPN4)835\nC4H)JY1\nLR4)VD5\nPSM)P1W\nVWL)C6C\nG2V)WBC\n85M)R24\nB1V)QW7\n175)2PM\nY1V)1ZH\n34W)3MJ\nWN7)TTB\n3PV)CQD\nN7Y)9T3\n223)8D4\nRV6)LJ9\nHFP)JRF\nVMT)DNB\nGJP)D3F\nJ5G)KMS\n7Q6)ZW2\nYCB)JBY\nXGN)MNL\n888)DSP\nX61)Q6N\nWT5)X12\nSDN)FD1\n2QC)54W\nV98)964\nT7S)YVZ\nMLX)9VZ\nFR8)QH5\nTVQ)2PS\n2PV)FHY\nF4S)MPT\n3J9)JNB\nJ6M)GDC\nQ4C)MJN\n9VZ)BZK\nP2P)B69\nWBC)M1W\nD97)HPF\nJKB)9L4\n593)6YJ\nRMB)4Q5\nQZB)38C\nH12)6R1\nMKY)DDD\nHGX)CRG\nP53)WY7\n22B)GMM\n44X)2D8\nDT8)L7H\n3Y2)D3S\nFB8)68N\n3BC)1XR\n4XF)TVQ\nVPL)R7V\nZ4V)JSK\nB3S)FW5\n49Z)YQQ\n99V)D13\n54Q)SS7\nCYC)TXH\nPQ3)78W\nX4M)G9H\nWFL)M99\nZYY)3Y2\n12Y)PSW\nW38)P29\nH8W)JJ6\nP66)VPH\nGK2)45T\nH5F)FJT\nJDJ)SNV\n14F)96Q\nJG6)TQ4\n2L6)52Q\nSCY)CBJ\n3GN)KNC\nKLM)XPR\nDH1)QZB\nDMB)X7G\nDPL)7SX\nD97)N3N\nGNS)T95\n53P)GW2\nBHR)HNB\nYHX)XQV\n2CR)Y1V\nC9D)Z7P\nFN8)2PT\n6LF)FCQ\nJNL)LQR\nSPV)YCB\nHGX)N83\nVS4)8BT\n5RH)FTX\nHYC)X2J\n69V)J6S\n9XS)PN4\nSD7)5Q3\n2RN)82D\nQRY)FFY\nK2Y)3X2\n79Z)S2Z\nYN2)Y64\nJKB)MDT\nKJ8)NDH\nN57)5VH\n3XK)1Q1\nSCH)FJ6\n17N)GMP\nQR4)7V2\nGLV)GLY\nNHF)ZDY\nQDL)S14\nQF1)BMC\nZLF)DHN\n3JF)7TR\nMKS)GCY\n964)91R\n9L4)L5G\nRRX)6ZB\nCD7)73M\n3X2)PGC\nHNB)S9Z\nL94)KLM\n8MQ)SCR\n18C)3TJ\nM4Y)BTJ\nBC9)5YR\nTV5)SCY\n2NX)8CC\nC9Z)MTC\nB69)3QP\nHR7)CHJ\n8ZS)JRN\n31C)TJW\nD43)4NH\n93Q)X9X\nT95)DNZ\nLQ5)BC9\n9T5)S2C\nRP8)DH1\nGCY)SD7\nY44)9B5\nVG5)ZYY\n7RY)V3L\nPWV)Q4L\nNF1)7YF\nDRK)Y8V\nD13)GYG\nTW1)2PB\nZVZ)2VV\nBRJ)V2V\n9CB)Y7B\nMK4)9CJ\nTMR)6XS\nHWF)GK8\nQTF)S1S\nDFW)6LF\nN3S)WN1\nN2Q)MSW\nCZ5)X61\nFXZ)C4H\nSCQ)MF7\n9LY)3LN\n5MZ)PMX\nCN9)WF9\nFHY)PR8\nS38)NWH\nM29)G5S\n4NH)GZJ\n5YR)54H\nCLX)MNY\nTJD)HQL\nRRZ)4GQ\nYHB)CZ5\nP37)93Q\nYJG)3Q3\n95B)QMF\nCMQ)BLZ\nQD9)45M\nJSK)R28\nYCW)CLX\n8K3)JGB\nN8M)PQW\nP75)1HL\nXBS)T2T\n22C)PVW\n689)6MS\nFFY)RWX\nYHL)2G8\nY8V)4P1\nY7B)62Z\nYKJ)JDJ\n1HL)5LQ\nPZ3)B1C\n52Q)7HB\n3Q2)ZV7\nYBF)Z4V\nJ95)SDH\nNM6)YBF\n8YN)J3M\nJ6S)KNR\nPVT)N4X\nSDH)RFW\nRFW)7Y1\nJCB)52B\n3MJ)H58\n4QF)XHZ\nF62)DFW\n7LJ)KDW\nJHL)C9D\nB4D)Q8B\n342)YGS\nPFR)ZQT\nZ9K)TNS\n8F8)WLB\n94N)DMB\nQBT)RYS\n3VR)KRR\n8D4)ST6\nX9N)2PV\n632)8K3\nMX5)XNP\n57D)Y27\n18D)PQP\nD3F)RJ4\nPLS)PBL\n1JP)YDC\n79V)BG2\nS14)2NX\n4Q5)NCQ\nFTX)555\n2PM)KMH\nHQC)RMB\n9Z9)BNZ\nXHV)Y94\n7ZP)YHR\nBNZ)49Z\nW6D)LX6\nSLS)JL3\nPVW)P9W\nZ1L)HB5\nDS5)G2V\nZ9Q)RV8\nDFR)LPJ\n836)693\nK94)VWL\nHRG)836\nJ3V)593\n52N)LPK\n9KL)Y7M\nLX6)F7D\nJL3)511\nL4G)D97\n1RH)Y9F\nNJ2)LML\nGW2)9WV\n8KZ)NRC\nXQV)G6D\nR8Z)QF7\n326)HML\nR7R)8PM\n622)YCW\nWQY)LGS\nNF1)FF3\n5LQ)QF1\n5XR)PTD\nV2V)PFR\n9T5)JQ6\nCBQ)8KZ\nVZ4)HVQ\nTJW)DQT\n9WT)5M6\nCFK)YHL\nJR9)1JP\nY1K)CF4\n8WS)JPY\nVYC)1D6\nGKK)7J9\nJTG)RRX\n6V1)F74\n1H5)QR4\nSN3)NMG\nMF7)GQ1\nRYK)SCH\nBNZ)9LY\n1DJ)9LP\nL6W)5BK\nFCQ)BFL\nDCJ)3RD\nMXD)8MQ\nRWX)1RH\nNBF)WKM\nK6C)WNH\nH58)L6W\nY7B)BJH\nPGC)NBF\n96Q)Q2W\nF7D)BSN\n223)Z9K\nK94)VYC\nX9X)7M3\nQ1M)3J9\nQXF)XQ6\nDD7)3Q2\nQ1L)NHB\n79T)LXQ\n8TZ)M29\n21T)Q4C\nB1C)NSF\n8D8)FJ2\nLJH)HGJ\nQS2)PS1\n5KX)Z2L\nC6C)6BQ\nVQ2)2YP\nP87)N8M\nST5)L4G\n8SP)W5M\nT4H)69V\n9WF)GHS\nFF3)SND\nC5G)GKK\nVQ2)X4M\nP43)8J6\nTD6)384\n66V)CN9\nCX4)T9T\nNCQ)2JQ\n29K)K8K\nRY5)K4Q\nGQ3)T4H\nFNH)P32\n3BC)PRQ\n5HN)4QY\nM1W)BGT\n84R)ST5\nS45)CJW\nCK4)W7G\nSGX)19R\nS2C)7ZX\nDHN)W5Y\n8D9)HM2\nBSB)SPV\nD8K)DFV\nJHL)2L6\nKYP)12Y\nKDN)6X7\nY44)SQZ\n6G6)SJD\nN7D)QGF\nQ84)8WJ\nF89)LL9\nLYJ)2RN\n25X)Q84\nHM3)53P\nJNB)QD9\nSLW)1DQ\n384)3BC\nPR8)NGV\n49N)7ZP\n65H)LHJ\n6XS)S45\nZMG)FR1\nX2M)Y86\nQD3)QLM\nP4R)PQ3\nRTK)4M3\n4YW)N7D\nR7V)M4M\n73M)CBF\nDFV)64R\nZ7P)LMK\nHRG)Y1K\n3ZM)BCZ\nWY7)QXP\nDMC)9Q5\nPSW)1H5\n8CC)TV5\nTTB)S88\nBZK)K2Y\nT2B)CBQ\nHJB)Y19\nDQW)KML\nZ8W)8ZL\nPBL)5TK\n1D6)MX5\n3MJ)4YW\nMDT)HJB\n62Z)X33\nDZ7)BDC\n9CJ)FRD\n82D)KDN\nLK7)18D\n9QQ)61M\nY34)DZG\nJ4T)6KC\n971)QD3\n511)GQ3\nMJN)F62\nRNM)NKG\nBGW)KJ8\nDL2)1YH\nZQT)RYZ\n1YH)ZJ6\n2WT)YYQ\n7HB)DYQ\n3BN)WQY\n2M9)62D\nTSK)YR1\nN7Y)VJ8\nWZ4)FWT\nMNY)YN2\nDYQ)RRZ\n3RG)YT3\n2SM)VK9\nJH5)ZXH\nGYG)K2M\nPKF)V6G\nJGB)S87\nX94)N57\nMSW)L2Z\nX4N)25G\nBLZ)4QF\nJPY)GD9\nWLB)V6S\nKML)2SM\nTXH)9X1\n48V)KTR\n8PM)WZ4\nZW2)967\nPS9)3BN\n4WH)9T5\n8M1)R6V\nN7M)VWK\nS88)978\nN4X)8KH\n6VY)PLS\nNRC)874\nQGF)QWJ\nNMG)J3V\nB8Z)WPF\n45M)2QC\nKDW)VQ2\nFZW)223\nBXW)QXF\nFRD)PWV\n8HP)4G7\nKDN)YYL\nLHJ)SDN\nP6P)XMC\nW5Y)RYK\nHX8)KW3\nZ2L)H12\nWPF)T2B\nL7H)BGW\nMNL)17B\nGHS)66V\nQKX)XWV\nFW5)W38\nPDK)Y34\nFKG)Q6D\nDQT)YJG\n15G)79V\n4VK)51Y\nBJH)LR4\n48V)6GC\nDM5)Y1F\nCM5)VG5\nKB8)HRK\n5HN)RCQ\n6JP)SDQ\nLGH)NJ2\nL94)N7Y\n4Y2)ZLF\n25G)C4K\nK8K)SLS\n232)ZVZ\nGQ1)58J\nRV8)H5F\n78W)565\nYCF)8D9\nDZG)99V\nN83)CKR\nTN2)ZCX\nNGV)8SP\nBSN)FTN\nLPJ)94N\n3Q3)Q1M\nJVX)971\n54W)LGH\n67Y)P66\nR24)P37\n3QP)QTY\nYHR)FLT\nGMP)NM6\nNDH)632\nPWV)8D8\nLMK)3PV\nZWJ)KB8\n967)4VK\n3B1)WN7\nXWS)5CV\nYR1)FNH\n565)4PH\n5BK)V98\nW5Y)FR8\nPS1)HX8\n38C)XXG\nXWV)1YC\nM4M)LQ5\nS9Z)49N\nXMC)R1B\nYYL)VC9\nGMM)SCQ\nLXQ)J95\n51Y)RP8\nHLT)XBS\n82K)B8Z\nNR5)7K3\nK2M)67Y\nSF6)W6D\nCF4)85M\nMC3)LXM\nHMN)RNM\nBFL)4XF\nMT2)PM4\nVWK)JKB\n3JF)ZTZ\nQWJ)9QQ\nKRR)TJD\nVYW)Z9Q\nCK4)QS2\n8NQ)NR5\n57R)BHR\n8WM)YHB\nY86)GNS\n2Y2)Z21\nX12)9QX\nLJ9)YKJ\n3RD)8F1\n7SQ)CK4\nZXH)3XK\nDDD)5KX\nZCX)PYR\nGZJ)KXL\nKC5)52N\nPM4)RYP\n14X)ZWJ\nFJ6)175\n17B)689\nHQL)14F\nLQR)DBK\nLGS)4Y2\n2QQ)SGR\n2VV)8F8\nJ6S)LM3\nRTP)YZ5\nXDD)14K\nVQ4)MT2\nKMH)KYC\nCKR)RTP\nVD5)MRM\nCM5)KRW\nBG3)XDD\nPGM)J4T\nMY3)JVX\nZ8F)WNP\nBKM)WT5\nFLT)KTF\nN7D)8M1\nY19)CMQ\nHPF)WDL\n65H)JJP\n2MQ)66S\n4Q5)54Q\nQ2W)ZL4\nQTY)659\nMRM)9Z9\nX2J)SC4\nYWH)RB3\nFTN)LYJ\nLMK)N7M\nSGX)15G\nKW3)FQK\n3VV)JNL\nJWX)R8R\n9Z3)9MB\nBMC)N3S\nW7G)Z1L\nSD7)MW2\n376)RH8\nNWT)JHL\n7CD)N2Z\nKTR)HM3\n1Q1)TDZ\nDY9)2CR\n6YJ)14G\nFWT)JDW\nC2S)C5G\nSNV)J6M\n5TK)YWH\nJ3M)8HF\nHM2)GJP\nP9W)7CD\n1VN)SGX\nKMS)RBK\n64R)B1V\n62D)3VV\n61D)F4S\nXPR)SKN\nFJT)N3P\n9WV)D43\nTQ8)BDB\n46H)K4V\n8WJ)MXD\nNDM)9WF\n8ZL)1QJ\nSCR)2MQ\n7Y9)LJH\nVPH)MKY\nYDC)PDK\n4G7)65H\n2JM)NYY\nT9T)VMT\n8M1)TSK\nG5S)X4N\n6FH)KYP\nD98)DQW\nG6D)C2S\n6X7)N2Q\n1QJ)T7S\nZL4)J8T\n5BT)3VR\n835)KCJ\nYM8)3RG\nY7M)PWQ\n54W)9W4\nCBF)7LJ\n4T5)8WS\nRHQ)HBK\nCQD)D98\nHGJ)J6R\nJVC)79Z\nFD1)PKF\nVC9)5BT\nC4H)6WF\nD3S)P6P\nMR7)BG3\nR6V)DF3\n9X1)NQ5\nZTZ)2Y2\n8WM)HFP\nCDC)376\nTQ4)M4Y\n9MB)N1R\nHBK)DQ4\n1DQ)CYC\nWNP)DM8\nCBJ)LK7\nZT8)FWY\nLQD)PNN\n555)9Z3\nTNS)D9L\nQMF)L11\nFR8)5RH\nWF9)R87\nNKG)5HT\nL5G)91W\nN2Z)YV9\n9B5)CD7\nZV7)8NQ\nST6)74T\nZJ6)CQV\nS18)47M\n74T)8YN\nWNH)TN2\n874)46H\n3VV)PZ3\nY1F)42W\nMPT)2LP\nFDR)HWF\nX7G)RTK\n52B)P4R\nRYP)G93\nNWH)YCF\n7TR)FB8\nRWQ)6FH\n8F8)HLC\nCRN)P2P\nB6D)KC5\nPNN)HRG",
			"YOU",
			"SAN",
			119831,
			322,
		},
	}
	for _, tc := range testCases {
		t.Run("", func(t *testing.T) {
			ProcessOrbitMap(tc.mapString)
			// assert.Len(t, OrbitMap, tc.expectedBodyCount)
			c := GetTotalOrbitCount(OrbitMap)
			assert.Equal(t, tc.tOrbits, c)
			me, ok := OrbitMap[tc.startID]
			assert.True(t, ok)
			san, ok := OrbitMap[tc.endID]
			assert.True(t, ok)
			routeExist, injections := me.Parent.RouteTo(san.Parent.ID, me.Parent.ID)

			assert.True(t, routeExist)
			assert.Equal(t, tc.routLen, injections)

		})
	}
}
